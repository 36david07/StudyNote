# 비교연산

* 파이썬만의 특이한 비교연산
* short-circuit
* 비교연산 버그?

## 파이썬만의 특이한 비교연산

파이썬은 다른 언어와 다르게 2가지 조건을 동시에 비교할 때에 `a < x < b`와 같은 문법을 사용할 수 있습니다.  
이런 비교연산 문법은 실제론 `a < x and x < b`로 분리되어 동작합니다.  
그냥 보기에도 편리해보이고, 가독성도 좋으니 많이 쓰시는 걸 추천합니다.

## Short-Circuit

파이썬은 비교가 여러 번 수행될 경우 short-circuit이라는 최적화 방법을 사용합니다.  
앞의 조건만 봤는데도, 전체의 조건식의 True/False를 알 수 있다면 뒤의 조건은 실행도 안하는 것인데요, 다음은 예시입니다.   
```
if 1 > 0 or 1/0 == 'asdf'[10]:
    # 이런식으로 뒤의 조건식을 아예 오류가 나게끔 짜도 실행이 된다!
    print('OK')
if not (0 == 1 and 1 > 0):
    print('Good')
```
이렇게 뒤의 조건식을 실행도 하지 않기에 더 빠른 비교연산을 위해서는, 통과될 확률이 더 높은 조건일수록 더 앞에 두는 것이 좋습니다.

## 비교연산 버그?

다음 코드의 실행 결과는 뭘까요?
```
print(False == False in [False]) 
# True? False?
```
일단 앞에서부터 순서대로 연산이 처리되는지, 뒤에서부터 처리되는지 각각 경우에 대해서 조사해보면, 다음과 같습니다.  
```
a = (False == False) # True. False가 당연히 False니까
b = a in [False] # True in [False]. 따라서 False.

c = False in [False] # True. False가 원소로 있음.
d = False == c # False == True. 따라서 False.
```
앞에서 봐도 뒤에서 봐도 False인데, 사실 이걸 실행시키면 `True`라는 정말 골때리는 결과가 나옵니다.   
파이썬 버그가 아닐까 싶은 정도인데, 사실 버그는 아니고 `a < x < b`랑 같은 문법입니다.   

아까 저 문법이 모든 비교연산자에 대해서 통한다고 했는데, `in, ==, !=` 등도 전부 비교연산자이기에 위 문법으로 사용 가능합니다. 

그래서 사실 저 식은 `(False == False) and (False in [False])`였던 것이고,  
이는 `True and True`가 돼서 결과가 True가 되는 것입니다.

이게 코딩하다가 나온 실수라면 정말 디버깅하기 어렵고, 가독성도 매우 떨어지기에, 부등호가 아닌 비교연산에 대해서는 위의 문법을 사용하지 않는 것이 좋습니다.
